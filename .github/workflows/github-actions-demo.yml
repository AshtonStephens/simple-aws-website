name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions 🚀
on:
  pull_request:
    branches:
    - pipeline-mayhem
      # Pull request types can be found here:
      # https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#pull_request
    types: [opened, synchronize, reopened]
  push:
    branches:
    - pipeline-mayhem

jobs:

  Lint-Python-Server-Lambda:
    runs-on: ubuntu-latest
    steps:
      - run: echo "This is a Lint-Python-Server-Lambda"

  Test-Python-Server-Lambda:
    runs-on: ubuntu-latest
    # Don't bother testing if it doesn't pass linting.
    needs: [Lint-Python-Server-Lambda]
    steps:
      - run: echo "This is Test-Python-Server-Lambda"

  Test-Cloud-Formation-Template:
    runs-on: ubuntu-latest
    needs: [Lint-Python-Server-Lambda]
    steps:
      - run: echo "This is a Lint-Python-Server-Lambda"

  Test-Website:
    runs-on: ubuntu-latest
    needs: [Lint-Python-Server-Lambda]
    # Don't bother testing if it doesn't pass linting.
    steps:
      - run: echo "This is Test-Python-Server-Lambda"

  Test-Full-Deployment-Maybe:
    runs-on: ubuntu-latest
    needs: [Test-Python-Server-Lambda, Test-Cloud-Formation-Template, Test-Website]
    steps:
      - run: echo "This is Job-That-Requires-Other-Two"
      - run: echo "🎉 The job was automatically triggered by a ${{ github.event_name }} event."
      - run: echo "🐧 This job is now running on a ${{ runner.os }} server hosted by GitHub!"
      - run: echo "🔎 The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
      - name: Check out repository code
        uses: actions/checkout@v3
      - run: echo "💡 The ${{ github.repository }} repository has been cloned to the runner."
      - run: echo "🖥️ The workflow is now ready to test your code on the runner."
      - name: List files in the repository
        run: |
          ls ${{ github.workspace }}
      - run: echo "🍏 This job's status is ${{ job.status }}."
